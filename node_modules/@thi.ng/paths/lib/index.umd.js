!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@thi.ng/checks"),require("@thi.ng/errors")):"function"==typeof define&&define.amd?define(["exports","@thi.ng/checks","@thi.ng/errors"],t):t(((e=e||self).thi=e.thi||{},e.thi.ng=e.thi.ng||{},e.thi.ng.paths={}),e.thi.ng.checks,e.thi.ng.errors)}(this,(function(e,t,n){"use strict";const r=Array.isArray,l=t.isString,u=e=>r(e)?e.slice():Object.assign({},e),s=(e,t)=>(n,r)=>(n=u(n),n[e]=t?t(n[e],r):r,n),i=e=>r(e)?e:l(e)?e.length>0?e.split("."):[]:null!=e?[e]:[],o=e=>{const t=i(e);let[n,r,l,u]=t;switch(t.length){case 0:return e=>e;case 1:return e=>null!=e?e[n]:void 0;case 2:return e=>null!=e&&null!=(e=e[n])?e[r]:void 0;case 3:return e=>null!=e&&null!=(e=e[n])&&null!=(e=e[r])?e[l]:void 0;case 4:return e=>null!=e&&null!=(e=e[n])&&null!=(e=e[r])&&null!=(e=e[l])?e[u]:void 0;default:return e=>{const n=t.length-1;let r=e;for(let e=0;null!=r&&e<=n;e++)r=r[t[e]];return r}}},c=e=>{const t=i(e);let[n,r,l,o]=t;switch(t.length){case 0:return(e,t)=>t;case 1:return(e,t)=>(e=u(e),e[n]=t,e);case 2:return(e,t)=>{let l;return(e=u(e))[n]=l=u(e[n]),l[r]=t,e};case 3:return(e,t)=>{let s,i;return(e=u(e))[n]=s=u(e[n]),s[r]=i=u(s[r]),i[l]=t,e};case 4:return(e,t)=>{let s,i,c;return(e=u(e))[n]=s=u(e[n]),s[r]=i=u(s[r]),i[l]=c=u(i[l]),c[o]=t,e};default:let e;for(let n=t.length;--n>=0;)e=s(t[n],e);return e}},a=(e,t,n)=>c(t)(e,n),h=(e,t,n,...r)=>c(t)(e,n.apply(null,(r.unshift(o(t)(e)),r))),g=e=>{const t=i(e);let[n,r,l,u]=t;switch(t.length){case 0:return(e,t)=>t;case 1:return(e,t)=>e?(e[n]=t,e):void 0;case 2:return(e,t)=>{let l;return e&&(l=e[n])?(l[r]=t,e):void 0};case 3:return(e,t)=>{let u;return e&&(u=e[n])&&(u=u[r])?(u[l]=t,e):void 0};case 4:return(e,t)=>{let s;return e&&(s=e[n])&&(s=s[r])&&(s=s[l])?(s[u]=t,e):void 0};default:return(e,n)=>{let r=e;const l=t.length-1;for(let e=0;e<l;e++)if(!(r=r[t[e]]))return;return r[t[l]]=n,e}}},f=(e,t,n)=>g(t)(e,n);e.deleteIn=(e,t)=>{const n=[...i(t)];if(n.length>0){const t=n.pop();return h(e,n,e=>(e=Object.assign({},e),delete e[t],e))}},e.exists=(e,t)=>{if(null==e)return!1;for(let n=(t=i(t)).length-1,r=0;r<=n;r++){const l=t[r];if(!e.hasOwnProperty(l))return!1;if(null==(e=e[l])&&r<n)return!1}return!0},e.getIn=(e,t)=>o(t)(e),e.getter=o,e.mutIn=f,e.mutInMany=(e,...t)=>{const r=t.length;1&r&&n.illegalArgs(`require even number of args (got ${t.length})`);for(let n=0;n<r&&e;n+=2)e=f(e,t[n],t[n+1]);return e},e.mutator=g,e.setIn=a,e.setInMany=(e,...t)=>{const r=t.length;1&r&&n.illegalArgs(`require even number of args (got ${t.length})`);for(let n=0;n<r;n+=2)e=a(e,t[n],t[n+1]);return e},e.setter=c,e.toPath=i,e.updateIn=h,e.updater=(e,t)=>{const n=o(e),r=c(e);return(e,...l)=>r(e,t.apply(null,(l.unshift(n(e)),l)))},Object.defineProperty(e,"__esModule",{value:!0})}));