import { Stream } from "../stream";
import type { Path, Predicate2 } from "@thi.ng/api";
import type { ReadonlyAtom, ViewTransform } from "@thi.ng/atom";
import type { CommonOpts } from "../api";
export interface FromViewOpts<T> extends Partial<CommonOpts> {
    path: Path;
    tx?: ViewTransform<T>;
    equiv?: Predicate2<any>;
}
/**
 * Similar to {@link fromAtom}, but creates an eager derived view for a
 * nested value in atom / cursor and yields stream of its value changes.
 *
 * @remarks
 * Views are readonly and more lightweight versions of
 * {@link @thi.ng/atom#Cursor | cursors}. The view checks for value
 * changes with given `equiv` predicate ({@link @thi.ng/equiv#equiv} by
 * default). If the predicate returns a falsy result, the new value is
 * emitted on the stream. The first value emitted is always the
 * (possibly transformed) current value at the stream's start time (i.e.
 * when the first subscriber attaches).
 *
 * If the `tx` option is given, the raw value is first passed to this
 * transformer function and its result emitted on the stream instead.
 *
 * When the stream is cancelled the view is destroyed as well.
 *
 * @example
 * ```ts
 * db = new Atom({ a: 1, b: { c: 2 }});
 *
 * fromView(
 *   db,
 *   {
 *     path: "b.c",
 *     tx: (x) => x != null ? x : "n/a"
 * }).subscribe(trace("view:"))
 * // view: 2
 *
 * db.swapIn("b.c", (x: number) => x + 1);
 * // view: 3
 *
 * db.reset({ a: 10 });
 * // view: n/a
 * ```
 *
 * @param atom -
 * @param opts -
 */
export declare const fromView: <T>(atom: ReadonlyAtom<any>, opts: FromViewOpts<T>) => Stream<T>;
//# sourceMappingURL=view.d.ts.map