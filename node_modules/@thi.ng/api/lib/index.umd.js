!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).thi=e.thi||{},e.thi.ng=e.thi.ng||{},e.thi.ng.api={}))}(this,(function(e){"use strict";var t,n,i;(t=e.LogLevel||(e.LogLevel={}))[t.FINE=0]="FINE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.SEVERE=4]="SEVERE",t[t.NONE=5]="NONE",(n=e.Type||(e.Type={}))[n.U8=0]="U8",n[n.U8C=1]="U8C",n[n.I8=2]="I8",n[n.U16=3]="U16",n[n.I16=4]="I16",n[n.U32=5]="U32",n[n.I32=6]="I32",n[n.F32=7]="F32",n[n.F64=8]="F64",(i=e.GLType||(e.GLType={}))[i.I8=5120]="I8",i[i.U8=5121]="U8",i[i.I16=5122]="I16",i[i.U16=5123]="U16",i[i.I32=5124]="I32",i[i.U32=5125]="U32",i[i.F32=5126]="F32";const r={5120:2,5121:0,5122:4,5123:3,5124:6,5125:5,5126:7},o={2:5120,0:5121,1:5121,4:5122,3:5123,6:5124,6:5124,5:5125,7:5126,8:void 0},s={0:1,1:1,2:1,3:2,4:2,5:4,6:4,7:4,8:8},l={0:Uint8Array,1:Uint8ClampedArray,2:Int8Array,3:Uint16Array,4:Int16Array,5:Uint32Array,6:Int32Array,7:Float32Array,8:Float64Array,5121:Uint8Array,5120:Int8Array,5123:Uint16Array,5122:Int16Array,5125:Uint32Array,5124:Int32Array,5126:Float32Array};const a=Symbol(),c=()=>{},f="undefined"==typeof process||"production"!==process.env.NODE_ENV||"1"===process.env.UMBRELLA_ASSERTS?(e,t="assertion failed")=>{if("function"==typeof e&&!e()||!e)throw new Error("function"==typeof t?t():t)}:c,h=Object.freeze({level:e.LogLevel.NONE,fine(){},debug(){},info(){},warn(){},severe(){}});const d=(e,t={})=>{const n=Reflect.ownKeys(e),i=Reflect.ownKeys(t),r=Symbol("isa");function o(t){for(let i of n){const n=Object.getOwnPropertyDescriptor(t.prototype,i);!n||n.configurable?Object.defineProperty(t.prototype,i,{value:e[i],writable:!0}):console.log(`not patching: ${t.name}.${i.toString()}`)}return Object.defineProperty(t.prototype,r,{value:!0}),t}for(let e of i)Object.defineProperty(o,e,{value:t[e],enumerable:t.propertyIsEnumerable(e)});return Object.defineProperty(o,Symbol.hasInstance,{value:e=>!!e[r]}),o},y=d({_enabled:!0,isEnabled(){return this._enabled},enable(){this._enabled=!0,this.notify&&this.notify({id:"enable",target:this})},disable(){this._enabled=!1,this.notify&&this.notify({id:"disable",target:this})},toggle(){return this._enabled?this.disable():this.enable(),this._enabled}}),u=(e,t)=>{if(e)for(let n,i=0,r=e.length;i<r;i++)if(n=e[i],n[0].call(n[1],t),t.canceled)return},E=d({addListener(e,t,n){let i=(this._listeners=this._listeners||{})[e];return!i&&(i=this._listeners[e]=[]),-1===this.__listener(i,t,n)&&(i.push([t,n]),!0)},removeListener(e,t,n){let i;if(!(i=this._listeners))return!1;const r=i[e];if(r){const o=this.__listener(r,t,n);if(-1!==o)return r.splice(o,1),!r.length&&delete i[e],!0}return!1},notify(e){let t;if(!(t=this._listeners))return!1;void 0===e.target&&(e.target=this),u(t[e.id],e),u(t["*"],e)},__listener(e,t,n){let i=e.length;for(;--i>=0;){const r=e[i];if(r[0]===t&&r[1]===n)break}return i}}),p=d({addWatch(e,t){return this._watches=this._watches||{},!this._watches[e]&&(this._watches[e]=t,!0)},removeWatch(e){if(this._watches)return!!this._watches[e]&&(delete this._watches[e],!0)},notifyWatches(e,t){if(!this._watches)return;const n=this._watches;for(let i in n)n[i](i,e,t)}});e.ConsoleLogger=class{constructor(t,n=e.LogLevel.FINE){this.id=t,this.level=n}fine(...t){this.level<=e.LogLevel.FINE&&this.log("FINE",t)}debug(...t){this.level<=e.LogLevel.DEBUG&&this.log("DEBUG",t)}info(...t){this.level<=e.LogLevel.INFO&&this.log("INFO",t)}warn(...t){this.level<=e.LogLevel.WARN&&this.log("WARN",t)}severe(...t){this.level<=e.LogLevel.SEVERE&&this.log("SEVERE",t)}log(e,t){console.log(`[${e}] ${this.id}:`,...t)}},e.DEFAULT_EPS=1e-6,e.EVENT_ALL="*",e.EVENT_DISABLE="disable",e.EVENT_ENABLE="enable",e.GL2TYPE=r,e.IEnableMixin=y,e.INotifyMixin=E,e.IWatchMixin=p,e.NO_OP=c,e.NULL_LOGGER=h,e.SEMAPHORE=a,e.SIZEOF=s,e.TYPE2GL=o,e.TYPEDARRAY_CTORS=l,e.assert=f,e.configurable=e=>function(t,n,i){i.configurable=e},e.deprecated=(e,t=console.log)=>function(n,i,r){const o=`${n.constructor.name}#${i.toString()}`,s=r.value;return f("function"==typeof s,`${o} is not a function`),r.value=function(){return t(`DEPRECATED ${o}: ${e||"will be removed soon"}`),s.apply(this,arguments)},r},e.exposeGlobal=(e,t,n=!1)=>{const i="undefined"!=typeof global?global:"undefined"!=typeof window?window:void 0;i&&(n||"undefined"==typeof process||"production"!==process.env.NODE_ENV||"1"===process.env.UMBRELLA_ASSERTS)&&(i[e]=t)},e.inotify_dispatch=u,e.intType=e=>e>=-128&&e<128?2:e>=-32768&&e<32768?4:6,e.iterable=e=>d({*[Symbol.iterator](){yield*this[e]}}),e.mixin=d,e.nomixin=(e,t,n)=>{n.configurable=!1},e.sealed=e=>{Object.seal(e),Object.seal(e.prototype)},e.typedArray=function(e,...t){return new l[e](...t)},e.uintType=e=>e<=256?0:e<=65536?3:5,Object.defineProperty(e,"__esModule",{value:!0})}));