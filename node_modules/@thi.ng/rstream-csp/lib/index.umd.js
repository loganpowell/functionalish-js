!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@thi.ng/rstream")):"function"==typeof define&&define.amd?define(["exports","@thi.ng/rstream"],n):n(((e=e||self).thi=e.thi||{},e.thi.ng=e.thi.ng||{},e.thi.ng.rstreamCsp={}),e.thi.ng.rstream)}(this,(function(e,n){"use strict";e.fromChannel=(e,t)=>(t={id:`channel-${e.id}`,closeChannel:!0,...t},new n.Stream(i=>{let o=!0;return(async()=>{let n;for(;void 0!==(n=null,n=await e.read())&&void 0!==n&&o;)i.next(n);i.done()})(),()=>{!1!==t.closeChannel&&(e.close(!0),n.LOGGER.info("closed channel",e.id)),o=!1}},t)),Object.defineProperty(e,"__esModule",{value:!0})}));