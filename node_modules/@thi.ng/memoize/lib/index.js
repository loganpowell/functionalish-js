'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

const cache = {};
const defonce = (id, factory) => cache.hasOwnProperty(id) ? cache[id] : (cache[id] = factory());

function memoize(fn, cache) {
    return (...args) => {
        let res;
        return cache.has(args)
            ? cache.get(args)
            : (cache.set(args, (res = fn.apply(null, args))), res);
    };
}

function memoize1(fn, cache) {
    !cache && (cache = new Map());
    return (x) => {
        let res;
        return cache.has(x)
            ? cache.get(x)
            : (cache.set(x, (res = fn(x))), res);
    };
}

function memoizeJ(fn, cache) {
    !cache && (cache = {});
    return (...args) => {
        const key = JSON.stringify(args);
        if (key !== undefined) {
            return key in cache
                ? cache[key]
                : (cache[key] = fn.apply(null, args));
        }
        return fn.apply(null, args);
    };
}

exports.defonce = defonce;
exports.memoize = memoize;
exports.memoize1 = memoize1;
exports.memoizeJ = memoizeJ;
