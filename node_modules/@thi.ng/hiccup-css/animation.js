import { at_keyframes } from "./keyframes";
/**
 * Defines new `@keyframes` with given `id` and creates related class of
 * same name to configure given animation `opts`. Only the `duration`
 * option is given a default value (250ms), all others are optional.
 *
 * @example
 * ```ts
 * css(
 *   animation(
 *     "fadein",
 *     { delay: "0.5s" },
 *     { opacity: 0 },
 *     { opacity: 1 }
 *   )
 * );
 * ```
 *
 * ```css
 * @keyframes fadein {
 *     0% {
 *         opacity: 0;
 *     }
 *     100% {
 *         opacity: 1;
 *     }
 * }
 *
 * .fadein {
 *     animation-duration: 250ms;
 *     animation-name: fadein;
 *     animation-delay: 0.5s;
 * }
 * ```
 *
 * @param id - animation name
 * @param opts - animation config options
 * @param keyframes - keyframes
 */
export const animation = (id, opts, ...keyframes) => {
    opts = Object.assign({ duration: "250ms", name: id }, opts);
    return [
        at_keyframes.apply(null, [id, ...keyframes]),
        [
            `.${id}`,
            Object.keys(opts).reduce((acc, k) => ((acc[`animation-${k}`] = opts[k]), acc), {})
        ]
    ];
};
