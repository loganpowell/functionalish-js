!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@thi.ng/checks"),require("@thi.ng/errors"),require("@thi.ng/transducers")):"function"==typeof define&&define.amd?define(["exports","@thi.ng/checks","@thi.ng/errors","@thi.ng/transducers"],t):t(((e=e||self).thi=e.thi||{},e.thi.ng=e.thi.ng||{},e.thi.ng.hiccupCss={}),e.thi.ng.checks,e.thi.ng.errors,e.thi.ng.transducers)}(this,(function(e,t,n,r){"use strict";const s=["-moz-","-ms-","-o-","-webkit-"],i={rules:"",ruleSep:",",valSep:"",decls:"",declStart:"{",declEnd:"}",indent:"",comments:!1},o=new Set,a=r.comp(r.flatten(),r.map(e=>":[".indexOf(e.charAt(0))>=0?e:" "+e)),l=(e,r,s,i)=>{const o=s.length,a=[];let u,d;const m=(o,p)=>{let f=null;if(t.isArray(p))l(e,c(r,a),p,i);else if(t.isIterable(p)&&!t.isString(p))l(e,c(r,a),[...p],i);else if((d=t.isFunction(p))||(f=i.fns[p]))if(r.length)d?m(o,p()):n.illegalArgs(`quoted fn ('${p}') only allowed at head position`);else{if(f)return f.apply(null,s.slice(o+1))(e,i),!0;p(e,i)}else t.isPlainObject(p)?u=Object.assign(u||{},p):null!=p&&a.push(p)};for(let t=0;t<o;t++)if(m(t,s[t]))return e;return u&&e.push(p(r,a,u,i)),e},c=(e,t)=>e.length?[...r.permutations(e,t)]:t,p=(e,n,s,i)=>{const o=i.format,l=d(i),p=i.scope?((e,n)=>r.comp(e,r.map(e=>t.isString(e)&&0==e.indexOf(" .")?e+n:e)))(a,i.scope):a;return[l,r.transduce(r.map(e=>r.transduce(p,r.str(),t.isArray(e)?e:[e]).trim()),r.str(o.ruleSep),c(e,n)),o.declStart,u(s,i),l,o.declEnd].join("")},u=(e,n)=>{const r=n.format,s=n.autoprefix||o,i=d(n,n.depth+1),a=[];for(let o in e)if(e.hasOwnProperty(o)){let l=e[o];if(t.isFunction(l)&&(l=l(e)),t.isArray(l)&&(l=l.map(e=>t.isArray(e)?e.join(" "):e).join(r.ruleSep)),s.has(o))for(let e of n.vendors)a.push(`${i}${e}${o}:${r.valSep}${l};`);a.push(`${i}${o}:${r.valSep}${l};`)}return a.join(r.decls)+r.decls},d=(e,t=e.depth)=>t>1?[...r.repeat(e.format.indent,t)].join(""):t>0?e.format.indent:"",m=e=>`${e}%`;function f(e,...t){const n=1===t.length?t[0]:{0:t[0],100:t[1]};return(t,r)=>{const s=d(r);r.depth++;const i=d(r);t.push(`${s}@keyframes ${e}${r.format.declStart}`);for(let e in n)n.hasOwnProperty(e)&&t.push([i,m(e),r.format.declStart,u(n[e],r),i,r.format.declEnd].join(""));return r.depth--,t.push(s+r.format.declEnd),t}}const h=e=>(t,n,r=!1)=>`[${t}${e}="${n}"${r?" i":""}]`,$=h(""),g=h("~"),S=h("^"),y=h("$"),j=h("*"),b=(e,t=!1)=>(n,r)=>{const s=d(r),i=d(r,r.depth+1);return(r.format.comments||t)&&n.push(s+"/*",e.split("\n").map(e=>i+e).join("\n"),s+"*/"),n},x=(e,t,n)=>(r,s)=>{const i=d(s);return r.push(`${i}${e} ${O(t)}${s.format.declStart}`),s.depth++,l(r,[],n,s),s.depth--,r.push(i+s.format.declEnd),r},O=e=>{if(t.isString(e))return e;const n=[];for(let t in e)if(e.hasOwnProperty(t)){let r=e[t];!0===r?r=t:!1===r?r="not "+t:"only"===r?r+=" "+t:r=`(${t}:${r})`,n.push(r)}return n.join(" and ")},v=(e,...t)=>(n,r)=>(n.push(t.length?`@import url(${e}) ${t.join(r.format.ruleSep)};`:`@import url(${e});`),n),E=(e,t)=>x("@media",e,t);function A(...e){return(t,n)=>(t.push(e.length>1?`@namespace ${e[0]} url(${e[1]});`:`@namespace url(${e[0]});`),t)}const w=(e,t)=>x("@supports",e,t),P={"@comment":b,"@import":v,"@keyframes":f,"@media":E,"@namespace":A,"@supports":w};e.COMPACT=i,e.DEFAULT_VENDORS=s,e.PRETTY={rules:"\n",ruleSep:", ",valSep:" ",decls:"\n",declStart:" {\n",declEnd:"}\n",indent:"    ",comments:!0},e.QUOTED_FNS=P,e.animation=(e,t,...n)=>(t=Object.assign({duration:"250ms",name:e},t),[f.apply(null,[e,...n]),[`.${e}`,Object.keys(t).reduce((e,n)=>(e[`animation-${n}`]=t[n],e),{})]]),e.at_import=v,e.at_keyframes=f,e.at_media=E,e.at_namespace=A,e.at_supports=w,e.attribContains=g,e.attribEq=$,e.attribMatches=j,e.attribPrefix=S,e.attribSuffix=y,e.comment=b,e.conditional=x,e.css=(e,n)=>(n=Object.assign({format:i,vendors:s,fns:{},depth:0},n),t.isPlainObject(e)?u(e,n):(t.isArray(n.autoprefix)&&(n.autoprefix=new Set(n.autoprefix)),t.isIterable(e)&&!t.isString(e)&&(e=[...e]),t.isArray(e)?l([],[],e,n).join(n.format.rules):t.isFunction(e)?e([],n).join(n.format.rules):void 0)),e.deg=e=>`${e}deg`,e.em=e=>`${e}em`,e.ex=e=>`${e}ex`,e.injectStyleSheet=(e,t=!1)=>{const n=document.getElementsByTagName("head")[0],r=document.createElement("style");return r.setAttribute("type","text/css"),void 0!==r.styleSheet?r.styleSheet.cssText=e:r.textContent=e,t?n.insertBefore(r,n.firstChild):n.appendChild(r),r},e.ms=e=>`${e>>>0}ms`,e.percent=m,e.px=e=>`${e>>>0}px`,e.rad=e=>`${e}rad`,e.rem=e=>`${e}rem`,e.sec=e=>`${e}s`,e.turn=e=>`${e}turn`,e.vh=e=>`${e}vh`,e.vw=e=>`${e}vw`,e.withAttrib=e=>`[${e}]`,Object.defineProperty(e,"__esModule",{value:!0})}));